# Unity Hardware Tests Configuration

# Logging
CONFIG_LOG_DEFAULT_LEVEL_INFO=y
CONFIG_LOG_MAXIMUM_LEVEL_VERBOSE=y

# Serial monitor
CONFIG_ESP_CONSOLE_UART_DEFAULT=y

# Unity test runner (ESP-IDF)
CONFIG_UNITY_ENABLE=y
CONFIG_UNITY_ENABLE_IDF_TEST_RUNNER=y
CONFIG_UNITY_ENABLE_FLOAT=y
CONFIG_UNITY_ENABLE_DOUBLE=y
CONFIG_UNITY_ENABLE_BACKTRACE_ON_FAIL=y

# Disable watchdogs for tests
CONFIG_ESP_INT_WDT=n
CONFIG_ESP_TASK_WDT=n
CONFIG_ESPTOOLPY_FLASHSIZE_4MB=y

# Run-time checks of Heap and Stack
CONFIG_HEAP_POISONING_COMPREHENSIVE=y
CONFIG_COMPILER_STACK_CHECK_MODE_STRONG=y
CONFIG_COMPILER_STACK_CHECK=y
CONFIG_ESP_MAIN_TASK_STACK_SIZE=16000

# Compiler options
CONFIG_COMPILER_CXX_EXCEPTIONS=n
CONFIG_COMPILER_CXX_RTTI=n

# FreeRTOS
CONFIG_FREERTOS_HZ=1000
CONFIG_FREERTOS_USE_TRACE_FACILITY=y
CONFIG_FREERTOS_USE_STATS_FORMATTING_FUNCTIONS=y
CONFIG_FREERTOS_TIMER_TASK_STACK_DEPTH=6144

# Console
CONFIG_ESP_CONSOLE_UART_DEFAULT=y
CONFIG_ESP_CONSOLE_UART_NUM=0
CONFIG_ESP_CONSOLE_UART_BAUDRATE=115200

# Parking system - Fast test settings
CONFIG_PARKING_CAPACITY_TEST=y
CONFIG_PARKING_CAPACITY=2
CONFIG_PARKING_BARRIER_TIMEOUT_MS=500
CONFIG_PARKING_BUTTON_DEBOUNCE_MS=50

# GPIO defaults
CONFIG_PARKING_ENTRY_BUTTON_GPIO=25
CONFIG_PARKING_ENTRY_LIGHT_BARRIER_GPIO=23
CONFIG_PARKING_ENTRY_MOTOR_GPIO=22
CONFIG_PARKING_EXIT_LIGHT_BARRIER_GPIO=4
CONFIG_PARKING_EXIT_MOTOR_GPIO=2

# Console
CONFIG_PARKING_CONSOLE_ENABLED=y
CONFIG_PARKING_CONSOLE_MAX_ARGS=8
